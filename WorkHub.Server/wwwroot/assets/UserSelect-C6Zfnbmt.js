import{r as t,j as x}from"./index--uR3bosk.js";import{S as N}from"./SelectAsyncScroll-CqaChjMP.js";import{d as v}from"./common.utils-DPZ9yX3U.js";import{u as y}from"./useUsers-DFLz3FjB.js";import{i as C}from"./validate.utils-ciPUpZAo.js";const E=u=>{const{className:i,withoutIds:m=[],value:r,...p}=u,{userPaginated:o,loading:f,request:l,updateRequest:n,fetchUsers:d}=y(),[b,c]=t.useState([]);t.useEffect(()=>{C(r)||d(Array.isArray(r)?r:[r]).then(e=>{c(e.map(a=>({label:a.email,value:a.id})))})},[]),t.useEffect(()=>{c(e=>{const a=o.data.map(s=>({label:s.email,value:s.id}));return o.currentPage===1?a:Array.from(new Map([...e??[],...a].filter(s=>!m.includes(s.value.toString())).map(s=>[s.value,s])).values())})},[o.data]);const g=t.useCallback(v(e=>{n(a=>({...a,pageNumber:1,searchConditions:[{column:"email",operator:"Contains",values:[e]}]}))},300),[l]),h=t.useCallback(()=>{o.hasNextPage&&n(e=>({...e,pageNumber:e.pageNumber+1}))},[l,o.hasNextPage]),S=()=>{n(e=>({...e,pageNumber:1}))};return x.jsx(N,{value:r,className:i,options:b,loading:f,onSearch:g,scrollInfiniteCb:h,firstOpenDropdown:S,...p})},O=t.memo(E);export{E as U,O as a};
