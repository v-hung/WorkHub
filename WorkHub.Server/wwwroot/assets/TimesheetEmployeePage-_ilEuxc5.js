const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TimesheetSyncDataModal-Cn0HisqA.js","assets/index--uR3bosk.js","assets/index-BPvfZKEw.css","assets/DatePicker-C7I8Jg0m.js","assets/typeof-C5VrKZhV.js","assets/dropdown-Dl8K4053.js","assets/index-c0GfCdz7.js","assets/EllipsisOutlined-BTocrDpt.js","assets/index-f1v-kFPc.js","assets/collapse-BbEVqHco.js","assets/Input-CZqVGBfN.js","assets/useVariants-BuS53gwb.js","assets/useIcons-BCjpvc7O.js","assets/DownOutlined-DmCfGseC.js","assets/PageLoading-BLgQNoIA.js","assets/index-D5u-G5-S.js","assets/PageLoading-BDNVdRTM.css","assets/index-BgZba38B.js","assets/useBreakpoint-CJq1a_UD.js","assets/index-BgAJHb6z.js","assets/endOfMonth-BI9bRzhF.js","assets/startOfDay-DVNVffkj.js","assets/loader-C4fNgBr5.js","assets/auth.store-DCyo43Do.js","assets/error.utils-BlwQgnKf.js","assets/DefaultContent-rY5y8PUg.js","assets/common.utils-DPZ9yX3U.js","assets/DefaultContent-Cnu4jn1A.css","assets/DefaultBreadcrumb-DHRDwWi8.js","assets/DefaultBreadcrumb-BO2nQZti.css","assets/hasPermission-A1V7tTeH.js","assets/Permission-BrgRu2qR.js","assets/MainTable-GzCEjfuZ.js","assets/index-Cw5KyAVY.js","assets/index-tL5HCDFB.js","assets/index-BsljEl-V.js","assets/gapSize-U1swVQyS.js","assets/index-ndTAV7xn.js","assets/MainTable-bN2nDh4l.css","assets/calendar-check-YvWhLMyH.js","assets/date.utils-CRd9Tq6_.js","assets/en-US-BRWW7OjM.js","assets/buildMatchPatternFn-DF4FdbSS.js","assets/UserSelect-C6Zfnbmt.js","assets/SelectAsyncScroll-CqaChjMP.js","assets/useUsers-DFLz3FjB.js","assets/validate.utils-ciPUpZAo.js","assets/index-BCYX8c6P.js","assets/chevron-back-yLp5EtMO.js","assets/chevron-forward-BP65w4GZ.js","assets/addMonths-CDK6CqD6.js","assets/sync-I6-SBLfr.js"])))=>i.map(i=>d[i]);
import{r as n,i as w,j as t,B as p,l as k,_ as M}from"./index--uR3bosk.js";import{w as R}from"./loader-C4fNgBr5.js";import{D as C,a as q,b}from"./DefaultContent-rY5y8PUg.js";import{D}from"./DefaultBreadcrumb-DHRDwWi8.js";import{h as E}from"./hasPermission-A1V7tTeH.js";import{P}from"./Permission-BrgRu2qR.js";import{D as _}from"./DatePicker-C7I8Jg0m.js";import{M as F,F as I}from"./MainTable-GzCEjfuZ.js";import{t as v,g as j,R as h,a as f,b as L}from"./error.utils-BlwQgnKf.js";import{i as B,g as A,a as N,B as H,F as O,b as $}from"./calendar-check-YvWhLMyH.js";import{U as z}from"./UserSelect-C6Zfnbmt.js";import{f as u}from"./date.utils-CRd9Tq6_.js";import{T as U}from"./index-BCYX8c6P.js";import{F as W}from"./chevron-back-yLp5EtMO.js";import{F as G}from"./chevron-forward-BP65w4GZ.js";import{F as x,a as T}from"./addMonths-CDK6CqD6.js";import{F as K}from"./sync-I6-SBLfr.js";const V=()=>{const[a,s]=n.useState(!1),[o,i]=n.useState(),[l,m]=n.useState({date:new Date,userIds:[]}),y=B(l.date,new Date),c=async r=>{s(!0);try{const d=await v.timesheetGetMonthlyTimesheets({month:N(r.date)+1,year:A(r.date),pageNumber:1,pageSize:1e3,ids:r.userIds});i(d)}catch(d){w().error({message:await j(d)})}finally{s(!1)}},e=n.useCallback(r=>{m(d=>{const g=r===void 0?d:typeof r=="function"?r(d):r;return c(g),g})},[]);return{timesheetPaginated:o,loading:a,isCurrentMonth:y,request:l,updateRequest:e,getTimesheets:c}},Y=[{title:"Date",dataIndex:"dateString",key:"dateString"},{title:"Start Time",dataIndex:"startTime",key:"startTime"},{title:"End Time",key:"endTime",dataIndex:"endTime",width:"16%"},{title:"Total Work",key:"workMinutes",dataIndex:"workMinutes"}],J=[{title:"Date",render:(a,s)=>u(s.date,"dd/MM/yyyy"),key:"date"},{title:"Request Type",key:"requestType",render:(a,s)=>{const{requestType:o}=s,i={[h.LeaveRequest]:"green",[h.TimesheetAdjustmentRequest]:"orange",[h.OvertimeRequest]:"purple",[h.WorkFromHomeRequest]:"blue"};return t.jsx(U,{color:i[o],children:s.requestType})}},{title:"Time",key:"endTime",render:(a,s)=>`${u(s.breakStartDate)} - ${u(s.breakEndDate)}`},{title:"Reason",key:"reason",dataIndex:"reason"},{title:"Status",key:"status",render:(a,s)=>{const{status:o}=s,i={[f.Pending]:"default",[f.Approved]:"success",[f.Rejected]:"error"};return t.jsx(H,{status:i[o],text:s.status})}}],Q=()=>{const{request:a,timesheetPaginated:s,updateRequest:o,isCurrentMonth:i,loading:l}=V(),[m,y]=n.useState(null),c=n.useMemo(()=>s==null?void 0:s.data.map(e=>({id:e.id,date:e.date,dateString:u(e.date,"dd/MM/yyyy"),startTime:e.startTime?u(e.startTime):void 0,endTime:e.endTime?u(e.endTime):void 0,workMinutes:e.workMinutes,requests:e.requests})),[s]);return t.jsxs(x,{vertical:!0,style:{height:"100%"},children:[t.jsxs(x,{gap:"small",justify:"space-between",align:"end",flex:"none",style:{marginBottom:"1rem"},children:[t.jsx("div",{style:{marginRight:"auto"},children:t.jsx(z,{style:{width:"15rem"},placeholder:"PLease choose user",value:m,onChange:e=>{const r=typeof e=="string"?e:null;y(r),o(d=>({...d,userIds:r?[r]:[]}))}})}),t.jsx(p,{icon:t.jsx(W,{style:{width:20}}),onClick:()=>o(e=>({...e,date:T(e.date,-1)}))}),t.jsx(_,{picker:"month",value:a.date,onChange:e=>o(r=>({...r,date:e})),showNow:!0}),t.jsx(p,{icon:t.jsx(G,{style:{width:20}}),onClick:()=>o(e=>({...e,date:T(e.date,1)}))}),t.jsx(p,{icon:t.jsx(O,{style:{width:20}}),style:{color:i?k.primary:"inherit"},onClick:()=>o(e=>({...e,date:new Date}))})]}),t.jsx("div",{style:{flexGrow:1,minHeight:0},children:t.jsx(F,{className:"timesheet-table",columns:Y,dataSource:c,loading:l,pagination:!1,rowClassName:e=>$(e.date)?"weekend-row":"",expandable:{expandedRowRender:e=>(e.requests??[]).length>0?t.jsx(I,{rowKey:"id",dataSource:e.requests??void 0,pagination:!1,columns:J}):null,rowExpandable:e=>(e.requests??[]).length>0}})})]})},X=()=>{const[a,s]=n.useState(!1);return{loading:a,syncTimesheet:async(i,l)=>{try{let m=await L.bioStarSyncTimesheets({getHistoricalEventsRequest:i});l==null||l(m)}catch(m){w().error({message:await j(m)})}finally{s(!1)}}}},S=n.createContext(null),Z=({children:a})=>{const{loading:s,syncTimesheet:o}=X();return t.jsx(S.Provider,{value:{loading:s,syncTimesheet:o},children:a})},we=()=>{const a=n.useContext(S);if(!a)throw new Error("currentContext has to be used");return a},ee=n.lazy(()=>M(()=>import("./TimesheetSyncDataModal-Cn0HisqA.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51]))),te=R();function se(){const[a,s]=n.useState(!1);return t.jsx(C,{pageClassName:"h-screen",children:t.jsxs(Z,{children:[t.jsx(q,{title:"Timesheets Employees",children:E(P.PermissionsBioStarSyncTimesheets)?t.jsx(p,{color:"cyan",variant:"solid",icon:t.jsx(K,{width:16,height:16}),onClick:()=>s(!0),children:"Load timesheet form timekeeping machine"}):null}),t.jsx(D,{items:[{title:"Home",path:"/"},{title:"Timesheet Employees"}]}),t.jsx(b,{children:t.jsx(Q,{})}),t.jsx(n.Suspense,{fallback:null,children:t.jsx(ee,{open:a,onCancel:()=>s(!1)})})]})})}const je=Object.freeze(Object.defineProperty({__proto__:null,Component:se,loader:te},Symbol.toStringTag,{value:"Module"}));export{je as T,we as u};
