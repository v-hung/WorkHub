import{j as e,r as a,v as x,B as d,a as f}from"./index--uR3bosk.js";import{w as h}from"./loader-C4fNgBr5.js";import{M as v}from"./MainTable-GzCEjfuZ.js";import{u as C}from"./useDevices-BYAm9DVi.js";import{u as D}from"./useDeviceAction-BaCBKAKk.js";import{P as n}from"./Permission-BrgRu2qR.js";import{g as j}from"./color.utils-T8-ET6hG.js";import{h as c}from"./hasPermission-A1V7tTeH.js";import{U as P}from"./UserTableItem-esQ_qTPJ.js";import{T as b}from"./index-BCYX8c6P.js";import{S as y}from"./index-BsljEl-V.js";import{P as k}from"./index-CULCKU4c.js";import{h as w,b as R}from"./table.utils-CcbrKq_Y.js";import{D as T,a as U,b as A}from"./DefaultContent-rY5y8PUg.js";import{D as E}from"./DefaultBreadcrumb-DHRDwWi8.js";import{F as I}from"./plus-DnimChr7.js";import"./auth.store-DCyo43Do.js";import"./error.utils-BlwQgnKf.js";import"./index-f1v-kFPc.js";import"./index-Cw5KyAVY.js";import"./EllipsisOutlined-BTocrDpt.js";import"./dropdown-Dl8K4053.js";import"./index-c0GfCdz7.js";import"./collapse-BbEVqHco.js";import"./Input-CZqVGBfN.js";import"./useVariants-BuS53gwb.js";import"./useIcons-BCjpvc7O.js";import"./DownOutlined-DmCfGseC.js";import"./index-tL5HCDFB.js";import"./index-ndTAV7xn.js";import"./useBreakpoint-CJq1a_UD.js";import"./index-D5u-G5-S.js";import"./person-BiwMtXjz.js";import"./index-CWAu2eCQ.js";import"./gapSize-U1swVQyS.js";import"./index-0qdCREwA.js";import"./common.utils-DPZ9yX3U.js";const l=a.createContext(null),M=({children:i})=>{const{devicePaginated:t,updateRequest:o,loading:r}=C(),{deleteRecord:s}=D();return e.jsx(l.Provider,{value:{devicePaginated:t,updateRequest:o,loading:r,deleteRecord:s},children:i})},p=()=>{const i=a.useContext(l);if(!i)throw new Error("currentContext has to be used");return i},N=[{title:"Name",dataIndex:"name",key:"name"},{title:"Description",dataIndex:"description",key:"description"},{title:"Location",dataIndex:"location",key:"location"},{title:"Assigned User",key:"assignedUser",render:(i,t)=>e.jsx(P,{members:t.assignedUser?[t.assignedUser]:null})},{title:"Device Categories",key:"deviceCategories",render:(i,t)=>t.deviceCategories?t.deviceCategories.map(o=>e.jsx(b,{color:j("deviceCategory-"+o.id),children:o.name},o.id)):null},{title:"Status",dataIndex:"status",key:"status"},{title:"Action",key:"action",width:"9rem",fixed:"right",render:(i,t)=>e.jsx("div",{children:e.jsxs(y,{size:"small",children:[c(n.PermissionsDevicesEdit)?e.jsx(x,{href:`/devices/${t.id}/edit`,size:"small",color:"cyan",variant:"outlined",children:"Edit"}):null,c(n.PermissionsDevicesDelete)?e.jsx(q,{id:t.id}):null]})})}],q=({id:i})=>{const{updateRequest:t,deleteRecord:o}=p(),r=async()=>{await o(i),t(s=>({...s,pageNumber:1}))};return e.jsx(k,{title:"Delete the device",description:"Are you sure to delete this device?",onConfirm:r,placement:"bottomRight",children:e.jsx(d,{size:"small",danger:!0,children:"Delete"})})},B=()=>{const{devicePaginated:i,updateRequest:t,loading:o}=p();a.useEffect(()=>{t(m=>({...m,pageNumber:1,searchConditions:[]}))},[]);const r=a.useCallback(async(m,u,g)=>{w(m,u,g,t)},[t]),s=a.useMemo(()=>R(i),[i]);return e.jsx(v,{columns:N,dataSource:i.data,loading:o,pagination:s,onChange:r})},De=h(void 0,n.PermissionsDevicesView);function je(){const i=f();return e.jsxs(T,{pageClassName:"h-screen",children:[e.jsx(U,{title:"Devices Manager",children:c(n.PermissionsDevicesCreate)?e.jsx(d,{type:"primary",onClick:()=>i("/devices/create"),icon:e.jsx(I,{width:16,height:16}),children:"Add device"}):null}),e.jsx(E,{items:[{title:"Home",path:"/"},{title:"Device Manager"}]}),e.jsx(A,{children:e.jsx(M,{children:e.jsx(B,{})})})]})}export{je as Component,De as loader};
