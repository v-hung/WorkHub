import{j as e,r as a,v as l,B as d,a as x}from"./index--uR3bosk.js";import{w as g}from"./loader-C4fNgBr5.js";import{M as P}from"./MainTable-GzCEjfuZ.js";import{u as y}from"./useProjects-D3Wv5ymp.js";import{u as D}from"./useProjectAction-g1uFLqo6.js";import{P as n}from"./Permission-BrgRu2qR.js";import{f as p}from"./date.utils-CRd9Tq6_.js";import{h as c}from"./hasPermission-A1V7tTeH.js";import{U as C}from"./UserTableItem-esQ_qTPJ.js";import{T as b}from"./TeamTableItem-CKTqHDBv.js";import{d as v}from"./differenceInDays-BOrY2M2f.js";import{S as T}from"./index-BsljEl-V.js";import{P as k}from"./index-CULCKU4c.js";import{h as w,b as M}from"./table.utils-CcbrKq_Y.js";import{D as R,a as A,b as E}from"./DefaultContent-rY5y8PUg.js";import{D as I}from"./DefaultBreadcrumb-DHRDwWi8.js";import{F as N}from"./plus-DnimChr7.js";import"./auth.store-DCyo43Do.js";import"./error.utils-BlwQgnKf.js";import"./index-f1v-kFPc.js";import"./index-Cw5KyAVY.js";import"./EllipsisOutlined-BTocrDpt.js";import"./dropdown-Dl8K4053.js";import"./index-c0GfCdz7.js";import"./collapse-BbEVqHco.js";import"./Input-CZqVGBfN.js";import"./useVariants-BuS53gwb.js";import"./useIcons-BCjpvc7O.js";import"./DownOutlined-DmCfGseC.js";import"./index-tL5HCDFB.js";import"./index-ndTAV7xn.js";import"./useBreakpoint-CJq1a_UD.js";import"./index-D5u-G5-S.js";import"./startOfDay-DVNVffkj.js";import"./en-US-BRWW7OjM.js";import"./buildMatchPatternFn-DF4FdbSS.js";import"./color.utils-T8-ET6hG.js";import"./person-BiwMtXjz.js";import"./index-CWAu2eCQ.js";import"./index-BCYX8c6P.js";import"./gapSize-U1swVQyS.js";import"./index-0qdCREwA.js";import"./common.utils-DPZ9yX3U.js";const u=a.createContext(null),z=({children:r})=>{const{projectPaginated:t,updateRequest:i,loading:s}=y(),{deleteRecord:o}=D();return e.jsx(u.Provider,{value:{projectPaginated:t,updateRequest:i,loading:s,deleteRecord:o},children:r})},j=()=>{const r=a.useContext(u);if(!r)throw new Error("currentContext has to be used");return r},B=[{title:"Name",dataIndex:"name",key:"name"},{title:"Description",dataIndex:"description",key:"description"},{title:"Completion Time",key:"completionTime",render:(r,t)=>{if(!t.startDate||!t.endDate)return"N/A";const i=p(t.startDate,"dd/MM/yyyy"),s=p(t.endDate,"dd/MM/yyyy"),o=v(t.endDate,t.startDate);return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:`${i} - ${s}`}),e.jsx("div",{children:o&&e.jsxs("b",{children:["(",o," Days)"]})})]})}},{title:"Team",key:"team",render:(r,t)=>e.jsx(b,{team:t.team})},{title:"Members",key:"members",render:(r,t)=>e.jsx(C,{manager:t.manager,members:t.members})},{title:"Status",dataIndex:"status",key:"status"},{title:"Action",key:"action",width:"12rem",fixed:"right",render:(r,t)=>e.jsx("div",{children:e.jsxs(T,{size:"small",children:[e.jsx(l,{href:`/projects/${t.id}`,size:"small",color:"primary",variant:"outlined",children:"View"}),c(n.PermissionsProjectsEdit)?e.jsx(l,{href:`/projects/${t.id}/edit`,size:"small",color:"cyan",variant:"outlined",children:"Edit"}):null,c(n.PermissionsProjectsDelete)?e.jsx(S,{id:t.id}):null]})})}],S=({id:r})=>{const{updateRequest:t,deleteRecord:i}=j(),s=async()=>{await i(r),t(o=>({...o,pageNumber:1}))};return e.jsx(k,{title:"Delete the project",description:"Are you sure to delete this project?",onConfirm:s,placement:"bottomRight",children:e.jsx(d,{size:"small",danger:!0,children:"Delete"})})},_=()=>{const{projectPaginated:r,updateRequest:t,loading:i}=j();a.useEffect(()=>{t(m=>({...m,pageNumber:1,searchConditions:[]}))},[]);const s=a.useCallback(async(m,f,h)=>{w(m,f,h,t)},[t]),o=a.useMemo(()=>M(r),[r]);return e.jsx(P,{columns:B,dataSource:r.data,loading:i,pagination:o,onChange:s})},we=g(void 0,n.PermissionsProjectsView);function Me(){const r=x();return e.jsxs(R,{pageClassName:"h-screen",children:[e.jsx(A,{title:"Projects Manager",children:c(n.PermissionsProjectsCreate)?e.jsx(d,{type:"primary",onClick:()=>r("/projects/create"),icon:e.jsx(N,{width:16,height:16}),children:"Add project"}):null}),e.jsx(I,{items:[{title:"Home",path:"/"},{title:"Project Manager"}]}),e.jsx(E,{children:e.jsx(z,{children:e.jsx(_,{})})})]})}export{Me as Component,we as loader};
