import{r as s,A as h,j as t,e as u,a as f}from"./index--uR3bosk.js";import{w as p}from"./loader-C4fNgBr5.js";import{M as x}from"./MainTable-GzCEjfuZ.js";import{f as g}from"./date.utils-CRd9Tq6_.js";import{n as j,g as k}from"./error.utils-BlwQgnKf.js";import{F as b}from"./chevron-back-yLp5EtMO.js";import{F as C}from"./chevron-forward-BP65w4GZ.js";import{C as w}from"./index-tL5HCDFB.js";import{u as N}from"./notification.store-CiUytVKe.js";import{D as y,a as _,b as R}from"./DefaultContent-rY5y8PUg.js";import"./auth.store-DCyo43Do.js";import"./index-f1v-kFPc.js";import"./index-Cw5KyAVY.js";import"./EllipsisOutlined-BTocrDpt.js";import"./dropdown-Dl8K4053.js";import"./index-c0GfCdz7.js";import"./collapse-BbEVqHco.js";import"./Input-CZqVGBfN.js";import"./useVariants-BuS53gwb.js";import"./useIcons-BCjpvc7O.js";import"./DownOutlined-DmCfGseC.js";import"./index-BsljEl-V.js";import"./gapSize-U1swVQyS.js";import"./index-ndTAV7xn.js";import"./useBreakpoint-CJq1a_UD.js";import"./index-D5u-G5-S.js";import"./startOfDay-DVNVffkj.js";import"./en-US-BRWW7OjM.js";import"./buildMatchPatternFn-DF4FdbSS.js";import"./common.utils-DPZ9yX3U.js";const v=[{title:"title",dataIndex:"title",key:"title",width:"20%"},{title:"Message",dataIndex:"message",key:"description"},{title:"Date",key:"date",width:"8rem",render:(r,e)=>g(e.date,"dd/MM/yyyy")}],M=()=>{const[r,e]=s.useState(!1),{notification:n}=h.useApp(),[i,l]=s.useState({data:[],limit:50,totalCount:0,hasMore:!0,lastId:void 0}),c=s.useCallback(async a=>{e(!0);try{const o=await j.notificationSearch({cursorPagedRequest:{cursorId:a?i.lastId??void 0:void 0,cursorPagedRequestDirection:a}});l(o)}catch(o){n.error({message:await k(o)})}finally{e(!1)}},[i]);return{notificationPaginated:i,loading:r,fetchPaginatedNotifications:c}},L=(r,e)=>t.jsxs("svg",{viewBox:"0 0 512 512",width:"24px",height:"24px",ref:e,...r,children:[t.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:10,strokeWidth:32,d:"M320 146s24.36-12-64-12a160 160 0 1 0 160 160"}),t.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32,d:"m256 58l80 80l-80 80"})]}),P=s.forwardRef(L),S=(r,e)=>t.jsxs("svg",{viewBox:"0 0 512 512",width:"24px",height:"24px",ref:e,...r,children:[t.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32,d:"m112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320"}),t.jsx("path",{fill:"currentColor",stroke:"currentColor",strokeLinecap:"round",strokeMiterlimit:10,strokeWidth:32,d:"M80 112h352"}),t.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32,d:"M192 112V72h0a23.93 23.93 0 0 1 24-24h80a23.93 23.93 0 0 1 24 24h0v40m-64 64v224m-72-224l8 224m136-224l-8 224"})]}),A=s.forwardRef(S),F=(r,e)=>t.jsxs("svg",{viewBox:"0 0 512 512",width:"24px",height:"24px",ref:e,...r,children:[t.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32,d:"M320 96H88a40 40 0 0 0-40 40v240a40 40 0 0 0 40 40h334.73a40 40 0 0 0 40-40V239"}),t.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32,d:"m112 160l144 112l87-65.67"}),t.jsx("circle",{cx:431.95,cy:128.05,r:47.95,fill:"currentColor"}),t.jsx("path",{fill:"currentColor",d:"M432 192a63.95 63.95 0 1 1 63.95-63.95A64 64 0 0 1 432 192m0-95.9a32 32 0 1 0 31.95 32a32 32 0 0 0-31.95-32"})]}),E=s.forwardRef(F),I=r=>{const{className:e="",selected:n,onCheckAllChange:i,isCheckAll:l,...c}=r;return t.jsxs("div",{...c,className:`notification-toolbar ${e}`,children:[t.jsxs("div",{className:"toolbar__left",children:[t.jsx("label",{className:"toolbar__button",children:t.jsx(w,{id:"check-all",checked:l,onChange:a=>i(a.target.checked)})}),t.jsx("button",{className:"toolbar__button",children:t.jsx(P,{})}),n.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"toolbar__button",children:t.jsx(A,{style:{color:u[5]}})}),t.jsx("button",{className:"toolbar__button",children:t.jsx(E,{})})]})]}),t.jsxs("div",{className:"toolbar__right",children:[t.jsx("span",{className:"toolbar__summary",children:"1-50 of 62"}),t.jsx("button",{className:"toolbar__button",children:t.jsx(b,{})}),t.jsx("button",{className:"toolbar__button",children:t.jsx(C,{})})]})]})},W=()=>{const r=f(),[e,n]=s.useState([]),{notificationPaginated:i,loading:l,fetchPaginatedNotifications:c}=M();s.useEffect(()=>{c()},[]);const a=s.useMemo(()=>i.data,[i.data]);return t.jsxs(t.Fragment,{children:[t.jsx(I,{style:{paddingLeft:0},selected:e,onCheckAllChange:o=>{if(o){const d=a.map(m=>m.id);n(d)}else n([])},isCheckAll:e.length===a.length&&a.length>0}),t.jsx(x,{scroll:{y:"auto"},pagination:!1,showHeader:!1,columns:v,dataSource:a,loading:l,rowSelection:{selectedRowKeys:e,onChange:o=>{n(o)}},className:"notification-table",rowClassName:o=>`notification-table__row ${o.isRead?"":"unread"}`,onRow:o=>({onClick:()=>{o.category=="REQUEST"&&o.relatedEntityId&&r(`/requests/${o.relatedEntityId}`),o.isRead||N.getState().decreaseUnreadCount()}})})]})},ut=p();function ft(){return t.jsxs(y,{pageClassName:"h-screen",children:[t.jsx(_,{title:"Notifications"}),t.jsx(R,{children:t.jsx(W,{})})]})}export{ft as Component,ut as loader};
