import{j as e,r as n,v as f,B as c,a as x}from"./index--uR3bosk.js";import{w as g}from"./loader-C4fNgBr5.js";import{M as R}from"./MainTable-GzCEjfuZ.js";import{u as C}from"./useRoles-DtdAa_yA.js";import{u as j}from"./useRoleAction-12DrVNwC.js";import{P as a}from"./Permission-BrgRu2qR.js";import{h as m}from"./hasPermission-A1V7tTeH.js";import{S as P}from"./index-BsljEl-V.js";import{P as b}from"./index-CULCKU4c.js";import{h as D,b as v}from"./table.utils-CcbrKq_Y.js";import{D as w,a as y,b as k}from"./DefaultContent-rY5y8PUg.js";import{D as E}from"./DefaultBreadcrumb-DHRDwWi8.js";import{F as A}from"./plus-DnimChr7.js";import"./auth.store-DCyo43Do.js";import"./error.utils-BlwQgnKf.js";import"./index-f1v-kFPc.js";import"./index-Cw5KyAVY.js";import"./EllipsisOutlined-BTocrDpt.js";import"./dropdown-Dl8K4053.js";import"./index-c0GfCdz7.js";import"./collapse-BbEVqHco.js";import"./Input-CZqVGBfN.js";import"./useVariants-BuS53gwb.js";import"./useIcons-BCjpvc7O.js";import"./DownOutlined-DmCfGseC.js";import"./index-tL5HCDFB.js";import"./index-ndTAV7xn.js";import"./useBreakpoint-CJq1a_UD.js";import"./index-D5u-G5-S.js";import"./gapSize-U1swVQyS.js";import"./index-CWAu2eCQ.js";import"./index-0qdCREwA.js";import"./common.utils-DPZ9yX3U.js";const d=n.createContext(null),M=({children:t})=>{const{rolePaginated:o,updateRequest:r,loading:i}=C(),{deleteRecord:s}=j();return e.jsx(d.Provider,{value:{rolePaginated:o,updateRequest:r,loading:i,deleteRecord:s},children:t})},p=()=>{const t=n.useContext(d);if(!t)throw new Error("currentContext has to be used");return t},N=[{title:"Name",dataIndex:"name",key:"name"},{title:"Description",dataIndex:"description",key:"description"},{title:"Action",key:"action",width:"9rem",fixed:"right",render:(t,o)=>e.jsx("div",{children:e.jsxs(P,{size:"small",children:[m(a.PermissionsRolesEdit)?e.jsx(f,{href:`/roles/${o.id}/edit`,size:"small",color:"cyan",variant:"outlined",children:"Edit"}):null,m(a.PermissionsRolesDelete)?e.jsx(T,{id:o.id}):null]})})}],T=({id:t})=>{const{updateRequest:o,deleteRecord:r}=p(),i=async()=>{await r(t),o(s=>({...s,pageNumber:1}))};return e.jsx(b,{title:"Delete the role",description:"Are you sure to delete this role?",onConfirm:i,placement:"bottomRight",children:e.jsx(c,{size:"small",danger:!0,children:"Delete"})})},B=()=>{const{rolePaginated:t,updateRequest:o,loading:r}=p();n.useEffect(()=>{o(l=>({...l,pageNumber:1,searchConditions:[]}))},[]);const i=n.useCallback(async(l,u,h)=>{D(l,u,h,o)},[o]),s=n.useMemo(()=>v(t),[t]);return e.jsx(R,{columns:N,dataSource:t.data,loading:r,pagination:s,onChange:i})},ue=g(void 0,a.PermissionsRolesView);function he(){const t=x();return e.jsxs(w,{pageClassName:"h-screen",children:[e.jsx(y,{title:"Roles Manager",children:m(a.PermissionsRolesCreate)?e.jsx(c,{type:"primary",onClick:()=>t("/roles/create"),icon:e.jsx(A,{width:16,height:16}),children:"Add role"}):null}),e.jsx(E,{items:[{title:"Home",path:"/"},{title:"Role Manager"}]}),e.jsx(k,{children:e.jsx(M,{children:e.jsx(B,{})})})]})}export{he as Component,ue as loader};
