import{j as e,r as s,v as C,B as d,a as h}from"./index--uR3bosk.js";import{w as v}from"./loader-C4fNgBr5.js";import{M as f}from"./MainTable-GzCEjfuZ.js";import{u as x}from"./useDeviceCategories-BhEuV2A7.js";import{u as D}from"./useDeviceCategoryAction-DZDDAx-T.js";import{P as n}from"./Permission-BrgRu2qR.js";import{g as y}from"./color.utils-T8-ET6hG.js";import{h as m}from"./hasPermission-A1V7tTeH.js";import{T as j}from"./index-BCYX8c6P.js";import{S as P}from"./index-BsljEl-V.js";import{P as b}from"./index-CULCKU4c.js";import{h as w,b as R}from"./table.utils-CcbrKq_Y.js";import{D as k,a as T,b as E}from"./DefaultContent-rY5y8PUg.js";import{D as A}from"./DefaultBreadcrumb-DHRDwWi8.js";import{F as M}from"./plus-DnimChr7.js";import"./auth.store-DCyo43Do.js";import"./error.utils-BlwQgnKf.js";import"./index-f1v-kFPc.js";import"./index-Cw5KyAVY.js";import"./EllipsisOutlined-BTocrDpt.js";import"./dropdown-Dl8K4053.js";import"./index-c0GfCdz7.js";import"./collapse-BbEVqHco.js";import"./Input-CZqVGBfN.js";import"./useVariants-BuS53gwb.js";import"./useIcons-BCjpvc7O.js";import"./DownOutlined-DmCfGseC.js";import"./index-tL5HCDFB.js";import"./index-ndTAV7xn.js";import"./useBreakpoint-CJq1a_UD.js";import"./index-D5u-G5-S.js";import"./gapSize-U1swVQyS.js";import"./index-CWAu2eCQ.js";import"./index-0qdCREwA.js";import"./common.utils-DPZ9yX3U.js";const l=s.createContext(null),N=({children:t})=>{const{deviceCategoryPaginated:i,updateRequest:o,loading:r}=x(),{deleteRecord:a}=D();return e.jsx(l.Provider,{value:{deviceCategoryPaginated:i,updateRequest:o,loading:r,deleteRecord:a},children:t})},p=()=>{const t=s.useContext(l);if(!t)throw new Error("currentContext has to be used");return t},q=[{title:"Name",dataIndex:"name",key:"name"},{title:"Description",dataIndex:"description",key:"description"},{title:"Devices",key:"devices",render:(t,i)=>i.devices?i.devices.map(o=>e.jsx(j,{color:y("device-"+o.id),children:o.name},o.id)):null},{title:"Action",key:"action",width:"9rem",fixed:"right",render:(t,i)=>e.jsx("div",{children:e.jsxs(P,{size:"small",children:[m(n.PermissionsDevicesEdit)?e.jsx(C,{href:`/device-categories/${i.id}/edit`,size:"small",color:"cyan",variant:"outlined",children:"Edit"}):null,m(n.PermissionsDevicesDelete)?e.jsx(B,{id:i.id}):null]})})}],B=({id:t})=>{const{updateRequest:i,deleteRecord:o}=p(),r=async()=>{await o(t),i(a=>({...a,pageNumber:1}))};return e.jsx(b,{title:"Delete the deviceCategory",description:"Are you sure to delete this deviceCategory?",onConfirm:r,placement:"bottomRight",children:e.jsx(d,{size:"small",danger:!0,children:"Delete"})})},z=()=>{const{deviceCategoryPaginated:t,updateRequest:i,loading:o}=p();s.useEffect(()=>{i(c=>({...c,pageNumber:1,searchConditions:[]}))},[]);const r=s.useCallback(async(c,u,g)=>{w(c,u,g,i)},[i]),a=s.useMemo(()=>R(t),[t]);return e.jsx(f,{columns:q,dataSource:t.data,loading:o,pagination:a,onChange:r})},ve=v(void 0,n.PermissionsDevicesView);function fe(){const t=h();return e.jsxs(k,{pageClassName:"h-screen",children:[e.jsx(T,{title:"Device Categories Manager",children:m(n.PermissionsDevicesCreate)?e.jsx(d,{type:"primary",onClick:()=>t("/device-categories/create"),icon:e.jsx(M,{width:16,height:16}),children:"Add device category"}):null}),e.jsx(A,{items:[{title:"Home",path:"/"},{title:"Device Category Manager"}]}),e.jsx(E,{children:e.jsx(N,{children:e.jsx(z,{})})})]})}export{fe as Component,ve as loader};
