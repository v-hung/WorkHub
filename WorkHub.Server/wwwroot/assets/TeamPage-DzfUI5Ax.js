import{j as e,r as s,v as p,B as c,a as x}from"./index--uR3bosk.js";import{w as g}from"./loader-C4fNgBr5.js";import{M as j}from"./MainTable-GzCEjfuZ.js";import{u as T}from"./useTeams-CPTViS0J.js";import{u as C}from"./useTeamAction-BFYuUCef.js";import{P as n}from"./Permission-BrgRu2qR.js";import{h as l}from"./hasPermission-A1V7tTeH.js";import{U as b}from"./UserTableItem-esQ_qTPJ.js";import{T as P}from"./TeamTableItem-CKTqHDBv.js";import{S as y}from"./index-BsljEl-V.js";import{P as D}from"./index-CULCKU4c.js";import{h as v,b as w}from"./table.utils-CcbrKq_Y.js";import{D as R,a as k,b as E}from"./DefaultContent-rY5y8PUg.js";import{D as M}from"./DefaultBreadcrumb-DHRDwWi8.js";import{F as A}from"./plus-DnimChr7.js";import"./auth.store-DCyo43Do.js";import"./error.utils-BlwQgnKf.js";import"./index-f1v-kFPc.js";import"./index-Cw5KyAVY.js";import"./EllipsisOutlined-BTocrDpt.js";import"./dropdown-Dl8K4053.js";import"./index-c0GfCdz7.js";import"./collapse-BbEVqHco.js";import"./Input-CZqVGBfN.js";import"./useVariants-BuS53gwb.js";import"./useIcons-BCjpvc7O.js";import"./DownOutlined-DmCfGseC.js";import"./index-tL5HCDFB.js";import"./index-ndTAV7xn.js";import"./useBreakpoint-CJq1a_UD.js";import"./index-D5u-G5-S.js";import"./color.utils-T8-ET6hG.js";import"./person-BiwMtXjz.js";import"./index-CWAu2eCQ.js";import"./index-BCYX8c6P.js";import"./gapSize-U1swVQyS.js";import"./index-0qdCREwA.js";import"./common.utils-DPZ9yX3U.js";const d=s.createContext(null),N=({children:r})=>{const{teamPaginated:t,updateRequest:o,loading:a}=T(),{deleteRecord:i}=C();return e.jsx(d.Provider,{value:{teamPaginated:t,updateRequest:o,loading:a,deleteRecord:i},children:r})},u=()=>{const r=s.useContext(d);if(!r)throw new Error("currentContext has to be used");return r},z=[{title:"Name",render:(r,t)=>e.jsx(P,{team:t})},{title:"Description",dataIndex:"description",key:"description"},{title:"Members",key:"members",render:(r,t)=>e.jsx(b,{manager:t.manager,members:t.members})},{title:"Projects",dataIndex:"projects",key:"projects"},{title:"Action",key:"action",width:"12rem",fixed:"right",render:(r,t)=>e.jsx("div",{children:e.jsxs(y,{size:"small",children:[e.jsx(p,{href:`/teams/${t.id}`,size:"small",color:"primary",variant:"outlined",children:"View"}),l(n.PermissionsTeamsEdit)?e.jsx(p,{href:`/teams/${t.id}/edit`,size:"small",color:"cyan",variant:"outlined",children:"Edit"}):null,l(n.PermissionsTeamsDelete)?e.jsx(B,{id:t.id}):null]})})}],B=({id:r})=>{const{updateRequest:t,deleteRecord:o}=u(),a=async()=>{await o(r),t(i=>({...i,pageNumber:1}))};return e.jsx(D,{title:"Delete the team",description:"Are you sure to delete this team?",onConfirm:a,placement:"bottomRight",children:e.jsx(c,{size:"small",danger:!0,children:"Delete"})})},I=()=>{const{teamPaginated:r,updateRequest:t,loading:o}=u();s.useEffect(()=>{t(m=>({...m,pageNumber:1,searchConditions:[]}))},[]);const a=s.useCallback(async(m,h,f)=>{v(m,h,f,t)},[t]),i=s.useMemo(()=>w(r),[r]);return e.jsx(j,{columns:z,dataSource:r.data,loading:o,pagination:i,onChange:a})},Ce=g(void 0,n.PermissionsTeamsView);function be(){const r=x();return e.jsxs(R,{pageClassName:"h-screen",children:[e.jsx(k,{title:"Teams Manager",children:l(n.PermissionsTeamsCreate)?e.jsx(c,{type:"primary",onClick:()=>r("/teams/create"),icon:e.jsx(A,{width:16,height:16}),children:"Add team"}):null}),e.jsx(M,{items:[{title:"Home",path:"/"},{title:"Team Manager"}]}),e.jsx(E,{children:e.jsx(N,{children:e.jsx(I,{})})})]})}export{be as Component,Ce as loader};
