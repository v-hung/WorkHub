import{r as t,m as oe,n as re,o as se,p as ne,aH as ae,C as X,a4 as ie,a3 as q,q as T,ah as le,s as ce,j as V}from"./index--uR3bosk.js";import{R as de}from"./index-f1v-kFPc.js";import{u as ge,r as ue}from"./useBreakpoint-CJq1a_UD.js";import{a as me}from"./index-CWAu2eCQ.js";const H=t.createContext({}),pe=e=>{const{antCls:r,componentCls:n,iconCls:o,avatarBg:a,avatarColor:z,containerSize:h,containerSizeLG:S,containerSizeSM:v,textFontSize:m,textFontSizeLG:C,textFontSizeSM:R,borderRadius:p,borderRadiusLG:g,borderRadiusSM:O,lineWidth:w,lineType:N}=e,j=(s,u,E)=>({width:s,height:s,borderRadius:"50%",[`&${n}-square`]:{borderRadius:E},[`&${n}-icon`]:{fontSize:u,[`> ${o}`]:{margin:0}}});return{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},se(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:z,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:a,border:`${ne(w)} ${N} transparent`,"&-image":{background:"transparent"},[`${r}-image-img`]:{display:"block"}}),j(h,m,p)),{"&-lg":Object.assign({},j(S,C,g)),"&-sm":Object.assign({},j(v,R,O)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},ve=e=>{const{componentCls:r,groupBorderColor:n,groupOverlapping:o,groupSpace:a}=e;return{[`${r}-group`]:{display:"inline-flex",[r]:{borderColor:n},"> *:not(:first-child)":{marginInlineStart:o}},[`${r}-group-popover`]:{[`${r} + ${r}`]:{marginInlineStart:a}}}},fe=e=>{const{controlHeight:r,controlHeightLG:n,controlHeightSM:o,fontSize:a,fontSizeLG:z,fontSizeXL:h,fontSizeHeading3:S,marginXS:v,marginXXS:m,colorBorderBg:C}=e;return{containerSize:r,containerSizeLG:n,containerSizeSM:o,textFontSize:Math.round((z+h)/2),textFontSizeLG:S,textFontSizeSM:a,groupSpace:m,groupOverlapping:-v,groupBorderColor:C}},D=oe("Avatar",e=>{const{colorTextLightSolid:r,colorTextPlaceholder:n}=e,o=re(e,{avatarBg:n,avatarColor:r});return[pe(o),ve(o)]},fe);var he=function(e,r){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&r.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)r.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]]);return n};const Se=(e,r)=>{const[n,o]=t.useState(1),[a,z]=t.useState(!1),[h,S]=t.useState(!0),v=t.useRef(null),m=t.useRef(null),C=ae(r,v),{getPrefixCls:R,avatar:p}=t.useContext(X),g=t.useContext(H),O=()=>{if(!m.current||!v.current)return;const i=m.current.offsetWidth,l=v.current.offsetWidth;if(i!==0&&l!==0){const{gap:f=4}=e;f*2<l&&o(l-f*2<i?(l-f*2)/i:1)}};t.useEffect(()=>{z(!0)},[]),t.useEffect(()=>{S(!0),o(1)},[e.src]),t.useEffect(O,[e.gap]);const w=()=>{const{onError:i}=e;(i==null?void 0:i())!==!1&&S(!1)},{prefixCls:N,shape:j,size:s,src:u,srcSet:E,icon:x,className:A,rootClassName:B,alt:G,draggable:M,children:y,crossOrigin:$}=e,b=he(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),c=ie(i=>{var l,f;return(f=(l=s??(g==null?void 0:g.size))!==null&&l!==void 0?l:i)!==null&&f!==void 0?f:"default"}),k=Object.keys(typeof c=="object"?c||{}:{}).some(i=>["xs","sm","md","lg","xl","xxl"].includes(i)),I=ge(k),L=t.useMemo(()=>{if(typeof c!="object")return{};const i=ue.find(f=>I[f]),l=c[i];return l?{width:l,height:l,fontSize:l&&(x||y)?l/2:18}:{}},[I,c]),d=R("avatar",N),F=q(d),[K,Q,U]=D(d,F),Y=T({[`${d}-lg`]:c==="large",[`${d}-sm`]:c==="small"}),_=t.isValidElement(u),Z=j||(g==null?void 0:g.shape)||"circle",ee=T(d,Y,p==null?void 0:p.className,`${d}-${Z}`,{[`${d}-image`]:_||u&&h,[`${d}-icon`]:!!x},U,F,A,B,Q),te=typeof c=="number"?{width:c,height:c,fontSize:x?c/2:18}:{};let P;if(typeof u=="string"&&h)P=t.createElement("img",{src:u,draggable:M,srcSet:E,onError:w,alt:G,crossOrigin:$});else if(_)P=u;else if(x)P=x;else if(a||n!==1){const i=`scale(${n})`,l={msTransform:i,WebkitTransform:i,transform:i};P=t.createElement(de,{onResize:O},t.createElement("span",{className:`${d}-string`,ref:m,style:Object.assign({},l)},y))}else P=t.createElement("span",{className:`${d}-string`,style:{opacity:0},ref:m},y);return delete b.onError,delete b.gap,K(t.createElement("span",Object.assign({},b,{style:Object.assign(Object.assign(Object.assign(Object.assign({},te),L),p==null?void 0:p.style),b.style),className:ee,ref:C}),P))},J=t.forwardRef(Se),W=e=>{const{size:r,shape:n}=t.useContext(H),o=t.useMemo(()=>({size:e.size||r,shape:e.shape||n}),[e.size,e.shape,r,n]);return t.createElement(H.Provider,{value:o},e.children)},Ce=e=>{var r,n,o,a;const{getPrefixCls:z,direction:h}=t.useContext(X),{prefixCls:S,className:v,rootClassName:m,style:C,maxCount:R,maxStyle:p,size:g,shape:O,maxPopoverPlacement:w,maxPopoverTrigger:N,children:j,max:s}=e,u=z("avatar",S),E=`${u}-group`,x=q(u),[A,B,G]=D(u,x),M=T(E,{[`${E}-rtl`]:h==="rtl"},G,x,v,m,B),y=le(j).map((c,k)=>ce(c,{key:`avatar-key-${k}`})),$=(s==null?void 0:s.count)||R,b=y.length;if($&&$<b){const c=y.slice(0,$),k=y.slice($,b),I=(s==null?void 0:s.style)||p,L=((r=s==null?void 0:s.popover)===null||r===void 0?void 0:r.trigger)||N||"hover",d=((n=s==null?void 0:s.popover)===null||n===void 0?void 0:n.placement)||w||"top",F=Object.assign(Object.assign({content:k},s==null?void 0:s.popover),{classNames:{root:T(`${E}-popover`,(a=(o=s==null?void 0:s.popover)===null||o===void 0?void 0:o.classNames)===null||a===void 0?void 0:a.root)},placement:d,trigger:L});return c.push(t.createElement(me,Object.assign({key:"avatar-popover-key",destroyTooltipOnHide:!0},F),t.createElement(J,{style:I},`+${b-$}`))),A(t.createElement(W,{shape:O,size:g},t.createElement("div",{className:M,style:C},c)))}return A(t.createElement(W,{shape:O,size:g},t.createElement("div",{className:M,style:C},y)))},xe=J;xe.Group=Ce;const ye=(e,r)=>V.jsx("svg",{viewBox:"0 0 512 512",width:"24px",height:"24px",ref:r,...e,children:V.jsx("path",{fill:"currentColor",d:"M332.64 64.58C313.18 43.57 286 32 256 32c-30.16 0-57.43 11.5-76.8 32.38c-19.58 21.11-29.12 49.8-26.88 80.78C156.76 206.28 203.27 256 256 256s99.16-49.71 103.67-110.82c2.27-30.7-7.33-59.33-27.03-80.6M432 480H80a31 31 0 0 1-24.2-11.13c-6.5-7.77-9.12-18.38-7.18-29.11C57.06 392.94 83.4 353.61 124.8 326c36.78-24.51 83.37-38 131.2-38s94.42 13.5 131.2 38c41.4 27.6 67.74 66.93 76.18 113.75c1.94 10.73-.68 21.34-7.18 29.11A31 31 0 0 1 432 480"})}),Ee=t.forwardRef(ye);export{xe as A,Ee as F};
