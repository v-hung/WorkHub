import{a as p,b as u,r as d,i as f,j as e,B as g,f as h}from"./index--uR3bosk.js";import{g as x}from"./error.utils-BlwQgnKf.js";import{u as w}from"./auth.store-DCyo43Do.js";import{a as j}from"./loader-C4fNgBr5.js";import{F as t}from"./index-BgZba38B.js";import{I as l}from"./index-0qdCREwA.js";import{C as b}from"./index-tL5HCDFB.js";import"./collapse-BbEVqHco.js";import"./useBreakpoint-CJq1a_UD.js";import"./index-f1v-kFPc.js";import"./Input-CZqVGBfN.js";import"./useVariants-BuS53gwb.js";const y=()=>{const a=w(n=>n.login),o=p(),s=u(),[i,r]=d.useState(!1);return{loading:i,login:async n=>{try{if(i)return;r(!0),await a(n);const c=new URLSearchParams(s.search).get("redirectUrl")||"/";o(c)}catch(m){f().error({message:await x(m)})}finally{r(!1)}}}},k=j(async({request:a},{user:o})=>{if(o){const s=new URL(a.url).searchParams.get("redirectUrl")||"/";throw h(s)}});function q(){const{loading:a,login:o}=y(),s=r=>{o(r)},i=r=>{console.log("Failed:",r)};return e.jsxs(t,{name:"login-form",labelCol:{span:6},wrapperCol:{span:16},autoComplete:"off",initialValues:{rememberMe:!1},onFinish:s,onFinishFailed:i,children:[e.jsx(t.Item,{label:"email",name:"email",rules:[{required:!0,message:"Please input your email!"}],children:e.jsx(l,{})}),e.jsx(t.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:e.jsx(l.Password,{})}),e.jsx(t.Item,{name:"rememberMe",valuePropName:"checked",wrapperCol:{offset:6,span:16},children:e.jsx(b,{children:"Remember me"})}),e.jsx(t.Item,{wrapperCol:{offset:6,span:16},style:{marginBottom:0},children:e.jsx(g,{type:"primary",htmlType:"submit",loading:a,children:"Submit"})})]})}export{q as Component,k as loader};
