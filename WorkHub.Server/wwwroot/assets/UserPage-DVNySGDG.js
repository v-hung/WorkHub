import{j as e,v as u,B as c,r as n,w as y,x as b,a as C}from"./index--uR3bosk.js";import{M as P}from"./MainTable-GzCEjfuZ.js";import{U as m,c as U,S as k}from"./error.utils-BlwQgnKf.js";import{P as a}from"./Permission-BrgRu2qR.js";import{h as l}from"./hasPermission-A1V7tTeH.js";import{U as S}from"./UserCard--pzmK6Kc.js";import{f as w}from"./date.utils-CRd9Tq6_.js";import{u as p}from"./UserContext-BgoV8X3I.js";import{U as v}from"./UserTableItem-esQ_qTPJ.js";import{g as M,a as D,h as T,b as A}from"./table.utils-CcbrKq_Y.js";import{S as R}from"./index-BsljEl-V.js";import{P as h}from"./index-CULCKU4c.js";import{w as L}from"./loader-C4fNgBr5.js";import{D as B,a as F,b as O}from"./DefaultContent-rY5y8PUg.js";import{D as E}from"./DefaultBreadcrumb-DHRDwWi8.js";import{P as I}from"./PageLoading-BLgQNoIA.js";import{u as V}from"./useUserAction-eJtgLnYp.js";import{F as q}from"./sync-I6-SBLfr.js";import"./index-f1v-kFPc.js";import"./index-Cw5KyAVY.js";import"./EllipsisOutlined-BTocrDpt.js";import"./dropdown-Dl8K4053.js";import"./index-c0GfCdz7.js";import"./collapse-BbEVqHco.js";import"./Input-CZqVGBfN.js";import"./useVariants-BuS53gwb.js";import"./useIcons-BCjpvc7O.js";import"./DownOutlined-DmCfGseC.js";import"./index-tL5HCDFB.js";import"./index-ndTAV7xn.js";import"./useBreakpoint-CJq1a_UD.js";import"./index-D5u-G5-S.js";import"./auth.store-DCyo43Do.js";import"./person-BiwMtXjz.js";import"./index-CWAu2eCQ.js";import"./startOfDay-DVNVffkj.js";import"./en-US-BRWW7OjM.js";import"./buildMatchPatternFn-DF4FdbSS.js";import"./useUsers-DFLz3FjB.js";import"./color.utils-T8-ET6hG.js";import"./index-0qdCREwA.js";import"./gapSize-U1swVQyS.js";import"./common.utils-DPZ9yX3U.js";const z=s=>[{title:"User",width:"20rem",render:(r,t)=>e.jsx(S,{user:t,showEmail:!0}),dataIndex:"email",sorter:!0,...D("email"),defaultFilteredValue:M(s.searchConditions??[],"email")},{title:"Supervisor",render:(r,t)=>e.jsx(v,{members:t.supervisor?[t.supervisor]:[]})},{title:"User Position",dataIndex:"userPosition",key:"userPosition",sorter:!0,filters:Object.entries(U).map(([r,t])=>({value:t,text:r}))},{title:"User Status",dataIndex:"userStatus",key:"userStatus",sorter:!0,filters:Object.entries(m).map(([r,t])=>({value:t,text:r})),defaultFilteredValue:[m.Active,m.Onsite]},{title:"CreatedAt",key:"createdAt",dataIndex:"createdAt",render:(r,t)=>w(t.createdAt,"dd/MM/yyyy"),sorter:!0,defaultSortOrder:"ascend"},{title:"Action",key:"action",width:"12rem",render:(r,t)=>e.jsxs(R,{size:"small",children:[e.jsx(u,{href:`/users/${t.id}`,size:"small",color:"primary",variant:"outlined",children:"View"}),l(a.PermissionsUsersEdit)?e.jsx(u,{href:`/users/${t.id}/edit`,size:"small",color:"cyan",variant:"outlined",children:"Edit"}):null,l(a.PermissionsUsersDelete)?e.jsx(N,{id:t.id}):null]})}],H={email:k.Contains},N=({id:s})=>{const{updateRequest:r,deleteRecord:t}=p(),o=async()=>{await t(s),r(i=>({...i,pageNumber:1}))};return e.jsx(h,{title:"Delete the user",description:"Are you sure to delete this user?",onConfirm:o,placement:"bottomRight",children:e.jsx(c,{size:"small",danger:!0,children:"Delete"})})},_=()=>{const{userPaginated:s,updateRequest:r,loading:t,request:o}=p();n.useEffect(()=>{r()},[]);const i=n.useCallback(async(g,f,j)=>{T(g,f,j,r,H)},[r]),d=n.useMemo(()=>A(s),[s]),x=n.useMemo(()=>z(o.current),[]);return e.jsx(P,{columns:x,dataSource:s.data,loading:t,pagination:d,onChange:i})},W=()=>{const{loading:s,syncUsers:r}=V(),{updateRequest:t}=p(),o=async()=>{await r(i=>{b().info({title:"Thông báo",content:e.jsx($,{data:i}),onOk:()=>{t(d=>({...d,pageNumber:1}))}})})};return e.jsxs(e.Fragment,{children:[e.jsx(h,{title:"Bạn có chắc chắn muốn tải người dùng từ máy chấm công không?",description:"Tải tất cả người dùng từ máy chấm công về hệ thống, việc này sẽ mất một khoảng thời gian.",onConfirm:o,placement:"bottomRight",children:e.jsx(c,{color:"cyan",variant:"solid",icon:e.jsx(q,{width:16,height:16}),children:"Load user form timekeeping machine"})}),s?y.createPortal(e.jsx(I,{}),document.body):null]})},$=({data:s})=>e.jsxs(e.Fragment,{children:[e.jsx("b",{children:"Tải người dùng thành công"}),e.jsx("div",{style:{marginTop:12},children:e.jsx("table",{style:{borderCollapse:"collapse",width:"100%"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ccc"},children:"Số user tìm thấy"}),e.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ccc"},children:s.loadCount})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ccc"},children:"Số user thêm mới"}),e.jsx("td",{style:{padding:"4px 8px",border:"1px solid #ccc"},children:s.newCount})]})]})})})]}),Z=(s,r)=>e.jsxs("svg",{viewBox:"0 0 512 512",width:"24px",height:"24px",ref:r,...s,children:[e.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32,d:"M376 144c-3.92 52.87-44 96-88 96s-84.15-43.12-88-96c-4-55 35-96 88-96s92 42 88 96"}),e.jsx("path",{fill:"none",stroke:"currentColor",strokeMiterlimit:10,strokeWidth:32,d:"M288 304c-87 0-175.3 48-191.64 138.6c-2 10.92 4.21 21.4 15.65 21.4H464c11.44 0 17.62-10.48 15.65-21.4C463.3 352 375 304 288 304Z"}),e.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32,d:"M88 176v112m56-56H32"})]}),G=n.forwardRef(Z),Ie=L(void 0,a.PermissionsUsersView);function Ve(){const s=C();return e.jsxs(B,{pageClassName:"h-screen",children:[e.jsxs(F,{title:"User Manager",children:[l(a.PermissionsBioStarSyncUsers)?e.jsx(W,{}):null,l(a.PermissionsUsersCreate)?e.jsx(c,{type:"primary",onClick:()=>s("/users/create"),icon:e.jsx(G,{width:16,height:16}),style:{marginLeft:8},children:"Add user"}):null]}),e.jsx(E,{items:[{title:"Home",path:"/"},{title:"Users Manager"}]}),e.jsx(O,{children:e.jsx(_,{})})]})}export{Ve as Component,Ie as loader};
