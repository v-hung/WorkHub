import{r as d,i as x,j as e}from"./index--uR3bosk.js";import{u as b}from"./auth.store-DCyo43Do.js";import{u as v,a as C}from"./TimesheetPage-9wn4kcGd.js";import{r as S,g as N,x as F,R as p}from"./error.utils-BlwQgnKf.js";import{D as M}from"./DatePicker-C7I8Jg0m.js";import{I as T,T as O}from"./index-0qdCREwA.js";import{r as g,R as k,a as R}from"./request.util-VCGDjS3F.js";import{F as r}from"./index-BgZba38B.js";import{M as P}from"./index-BgAJHb6z.js";import"./date.utils-CRd9Tq6_.js";import"./startOfDay-DVNVffkj.js";import"./en-US-BRWW7OjM.js";import"./buildMatchPatternFn-DF4FdbSS.js";import"./timesheet.store-D6THQ--x.js";import"./isBefore-CMcmE5sE.js";import"./timesheet.util-DfkHrtme.js";import"./addMonths-CDK6CqD6.js";import"./gapSize-U1swVQyS.js";import"./calendar-check-YvWhLMyH.js";import"./index-f1v-kFPc.js";import"./DefaultContent-rY5y8PUg.js";import"./common.utils-DPZ9yX3U.js";import"./index-c0GfCdz7.js";import"./index-BCYX8c6P.js";import"./index-CULCKU4c.js";import"./index-CWAu2eCQ.js";import"./loader-C4fNgBr5.js";import"./MainTable-GzCEjfuZ.js";import"./index-Cw5KyAVY.js";import"./EllipsisOutlined-BTocrDpt.js";import"./dropdown-Dl8K4053.js";import"./collapse-BbEVqHco.js";import"./Input-CZqVGBfN.js";import"./useVariants-BuS53gwb.js";import"./useIcons-BCjpvc7O.js";import"./DownOutlined-DmCfGseC.js";import"./index-tL5HCDFB.js";import"./index-BsljEl-V.js";import"./index-ndTAV7xn.js";import"./useBreakpoint-CJq1a_UD.js";import"./index-D5u-G5-S.js";import"./chevron-back-yLp5EtMO.js";import"./chevron-forward-BP65w4GZ.js";import"./differenceInDays-BOrY2M2f.js";import"./endOfMonth-BI9bRzhF.js";import"./DefaultBreadcrumb-DHRDwWi8.js";import"./typeof-C5VrKZhV.js";import"./TimePicker.module-D3qUlonp.js";import"./validate.utils-ciPUpZAo.js";const V=()=>{const[c,n]=d.useState(!1),o=b(a=>{var s;return(s=a.user)==null?void 0:s.supervisor});return{formDefault:a=>({...F({}),approvedId:o==null?void 0:o.id,approvedName:(o==null?void 0:o.fullName)||"No supervisor",requestType:p.TimesheetAdjustmentRequest,date:a||new Date,breakTime:[null,null],workingTime:[null,null]}),loading:c,create:async(a,s)=>{n(!0);try{await S.timesheetAdjustmentRequestCreateRequest({createTimesheetAdjustmentRequestDto:a}),s==null||s(),x().success({message:"Successfully completed"})}catch(f){x().error({message:await N(f)})}finally{n(!1)}}}},E=c=>{const{className:n="",...o}=c,{isOpen:u,closeRequest:h,date:a}=v(),{getCurrentTimesheets:s,isCurrentMonth:f}=C(),{loading:A,create:w,formDefault:j}=V(),l=b(t=>{var m;return(m=t.user)==null?void 0:m.workTime}),[i]=r.useForm(),[y]=d.useState(j()),D=()=>{i.validateFields().then(async()=>{const t=i.getFieldsValue(),m={...t,breakStartDate:t.breakTime[0],breakEndDate:t.breakTime[1],checkIn:t.workingTime[0],checkOut:t.workingTime[1]};await w(m).then(()=>{h()}),f&&await s(new Date)})},I=()=>{h()};return d.useEffect(()=>{i&&u(p.TimesheetAdjustmentRequest)&&(i.resetFields(),i.setFieldsValue(j(a)))},[a,i,u(p.TimesheetAdjustmentRequest)]),e.jsx(P,{open:u(p.TimesheetAdjustmentRequest),...o,className:`${n}`,title:"Leave Request",onOk:D,confirmLoading:A,onCancel:I,maskClosable:!1,children:e.jsxs(r,{form:i,initialValues:y,validateTrigger:"onSubmit",name:"timesheetAdjustmentRequest",autoComplete:"off",layout:"horizontal",style:{marginTop:"2rem"},labelCol:{span:6},wrapperCol:{span:18},children:[e.jsx(r.Item,{name:"requestType",hidden:!0,children:e.jsx(T,{disabled:!0})}),e.jsx(r.Item,{name:"approvedId",rules:[{required:!0,message:"Please input your Approved!"}],hidden:!0,children:e.jsx(T,{disabled:!0})}),e.jsx(r.Item,{shouldUpdate:!0,noStyle:!0,children:({getFieldError:t})=>{var m,q;return e.jsx(r.Item,{label:"Approved User",name:"approvedName",validateStatus:(m=t("approvedId"))!=null&&m.length?"error":"",help:(q=t("approvedId"))==null?void 0:q[0],children:e.jsx(T,{disabled:!0})})}}),e.jsx(r.Item,{label:"Date",name:"date",rules:[{required:!0,message:"Please input your date!"}],children:e.jsx(M,{})}),e.jsx(r.Item,{label:"Working Time",name:"workingTime",required:!0,rules:[{validator:g(l,!0)}],children:e.jsx(k,{disabledTime:()=>R(l),hideDisabledOptions:!0,showSecond:!1})}),e.jsx(r.Item,{label:"Break Time",name:"breakTime",rules:[{validator:g(l)}],children:e.jsx(k,{disabledTime:()=>R(l),hideDisabledOptions:!0,showSecond:!1})}),e.jsx(r.Item,{label:"Reason",name:"reason",rules:[{required:!0,message:"Please input your reason!"}],children:e.jsx(O,{})})]})})},Me=d.memo(E);export{Me as TimesheetAdjustmentRequestModelMemo,E as default};
